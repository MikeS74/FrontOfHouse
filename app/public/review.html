<!DOCTYPE>
<html>

<head>
<!--     <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"> -->
    <!--NEED TO ADD LINK TO REVIEW.CSS-->
    <link rel="stylesheet" href="static/assets/css/reset.css" />
    <link rel="stylesheet" href="static/assets/css/header.css" />
    <link rel="stylesheet" href="static/assets/css/minimal-form.css" />
    <link rel="stylesheet" href="static/assets/css/review-form-style.css" />
<script src="https://code.jquery.com/jquery.js"></script>

</head>

<body>
    <div class="nav"></div>
    <!--FORM STARTS-->
    <div class="form-div">
    <form>
        <!--COMPANY NAME how is this going to be generated?-->
        COMPANY NAME
        <br>
        <!--REVIEW TITLE-->
        <br>User Name:<br>
  <input type="text" name="reviewTitle" id="user_id" class="form-control">
        <br><br>Business Name:<br>
  <input type="text" name="businessName" id="business_name" class="form-control">
        <br><br>Business Review:<br>
        <textarea rows="4" cols="50" type="text" name="businessReview" id="business_review" class="form-control" style="width:100%"></textarea>
        <br><br>Star Rating:<br>
  <!--OVERALL RATING : STARS-->
        <select data-placeholder="" class="chosen-select" id="star_rating" style="width:50px">
            <option value=""></option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
       <br><br> Pros:<br>
  <input type="text" name="pros" id="pros" class="form-control" style="width:100%">
        <br><br>Cons:<br>
  <input type="text" name="cons" id="cons" class="form-control" style="width:100%">
        <br><br>Suggestions to Management:<br>
  <input type="text" name="suggestions_to_mgmt" id="suggestions_to_mgmt" class="form-control" style="width:100%">
        <!--Submit-->
        <br><br>
        <input type="submit" value="Submit" class="submit_form">
        <br>
    </form>
</div>
<script type="text/javascript">


         // $(".rest-list-item").on("click", function(event) {
         //     var newReview = {
         //         api_id: $(this).attr("data-zomato-id"),
         //         business_name: $(this).attr("data-zomato-name"),
         //         business_loc: $(this).attr("data-zomato-loc")
         //     };
         //     $.ajax("/api/reviews", {
         //         type: "POST",
         //         data: newReview
         //     }).then(function() {
         //         console.log(newReview);
         //     });
         // });

        $(".submit_form").on("click", function (event) {
            event.preventDefault();
            
            function validateForm() {
		  var isValid = true;
		  $('.form-control').each(function() {
		    if ( $(this).val() === '' )
		        isValid = false;
		  });
		  $('.chosen-select').each(function() {
		  	if( $(this).val() === "")
		  		isValid = false
		  })
		  return isValid;
		}
        
        if (validateForm() == true) {

        var newForm = {
            user_name: $("#user_id").val().trim(),
            business_name: $("#business_name").val().trim(),
            business_review: $("#business_review").val().trim(),
            star_rating: $("#star_rating").val(),
            pros: $("#pros").val().trim(),
            cons: $("#cons").val().trim(),
            suggestion_to_mgmt: $("#suggestions_to_mgmt").val().trim()
        };

        $.ajax("/api/reviews", {
                 type: "POST",
                 data: newForm
             }).then(function() {
                 console.log(newForm);
             });

console.log(newForm);
window.location.replace("/restaurant");
            } 
            else {
                alert("Please fill out a review before submitting!");
            }
            return false;
});
   
</script>

 <!-- jqeury link -->
    <script src ="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    
    <!--typehead link -->
    <script src ="https://cdnjs.cloudflare.com/ajax/libs/typeahead.js/0.11.1/typeahead.jquery.js"></script>
    
    <!-- bloodhound link -->
    <script src ="https://cdnjs.cloudflare.com/ajax/libs/corejs-typeahead/1.2.1/bloodhound.js"></script>

    <!-- Code to the JavaScript File -->
    <script src="static/assets/js/autocomplete.js"></script>
    <script src="static/assets/js/reviews.js"></script>

</body>

</html>
